<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Userspace Resource Manager: CoreAPIsExamples.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Userspace Resource Manager
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('CoreAPIsExamples_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">CoreAPIsExamples.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>Sample Usage of <a class="el" href="classResource.html" title="Used to store information regarding Resources / Tunables which need to be Provisioned as part of the ...">Resource</a> Tuner APIs.</p>
<p>Sample Usage of <a class="el" href="classResource.html" title="Used to store information regarding Resources / Tunables which need to be Provisioned as part of the ...">Resource</a> Tuner APIs.This files covers examples of the following APIs:</p><ul>
<li>tuneResources</li>
<li>retuneResources</li>
<li>untuneResources</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: BSD-3-Clause-Clear</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Urm/UrmAPIs.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define UCLAMP_MIN_RES 0x00030000</span></div>
<div class="line"><span class="preprocessor">#define UCLAMP_BOOST_VAL 750</span></div>
<div class="line"><span class="preprocessor">#define TUNE_DURATION 5000 </span><span class="comment">// duration in msec</span></div>
<div class="line"><span class="preprocessor">#define FAIL -1</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// EXAMPLE #1</span></div>
<div class="line"><span class="comment">// In the following Example the Client Sends:</span></div>
<div class="line"><span class="comment">// - A Resource Provisioning (Tune) Request to Tune 1 Resource</span></div>
<div class="line"><span class="comment">//   i.e. We try to Provision a Single Resource as part of this Request,</span></div>
<div class="line"><span class="comment">//   The Resource Config for this Resource is as follows (note, Configs are specified via YAML files):</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * ResourceConfigs:</span></div>
<div class="line"><span class="comment"> *   - ResType: &quot;0x03&quot;</span></div>
<div class="line"><span class="comment"> *     ResID: &quot;0x0000&quot;</span></div>
<div class="line"><span class="comment"> *     Name: &quot;RES_SCHED_UTIL_CLAMP_MIN&quot;</span></div>
<div class="line"><span class="comment"> *     Path: &quot;/proc/sys/kernel/sched_util_clamp_min&quot;</span></div>
<div class="line"><span class="comment"> *     Supported: true</span></div>
<div class="line"><span class="comment"> *     HighThreshold: 1024</span></div>
<div class="line"><span class="comment"> *     LowThreshold: 0</span></div>
<div class="line"><span class="comment"> *     Permissions: &quot;third_party&quot;</span></div>
<div class="line"><span class="comment"> *     Modes: [&quot;display_on&quot;, &quot;doze&quot;]</span></div>
<div class="line"><span class="comment"> *     Policy: &quot;lower_is_better&quot;</span></div>
<div class="line"><span class="comment"> *     ApplyType: &quot;global&quot;</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> func1() {</div>
<div class="line">    <span class="comment">// First Create a List of Resources to be Provisioned as part of this Request</span></div>
<div class="line">    <span class="comment">// Note multiple Resources can be part of a single Resource Tuner Request</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Specify the duration as a 64-bit Signed Integer. Note, this value specifies the</span></div>
<div class="line">    <span class="comment">// Time Interval in milliseconds.</span></div>
<div class="line">    int64_t duration = 5000; <span class="comment">// Equivalent to 5 seconds</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a 32 bit integer which specifies the Request Properties</span></div>
<div class="line">    <span class="comment">// This field actually encodes two values:</span></div>
<div class="line">    <span class="comment">// - Priority (8 bits: 25 - 32)</span></div>
<div class="line">    <span class="comment">// - Background Processing Status (8 bits: 17 - 24):</span></div>
<div class="line">    <span class="comment">//   Should the Request be Processed in Background (i.e. when the display is in</span></div>
<div class="line">    <span class="comment">//   Off or Doze Mode).</span></div>
<div class="line">    int32_t properties = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Default Value of 0, corresponds to a Priority of High</span></div>
<div class="line">    <span class="comment">// and Background Processing Status of False.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create Helpers for these</span></div>
<div class="line">    <span class="comment">// To set the Priority as Low</span></div>
<div class="line">    properties = SET_REQUEST_PRIORITY(properties, REQ_PRIORITY_LOW);</div>
<div class="line"> </div>
<div class="line">    <a id="_a0" name="_a0"></a><a class="code hl_struct" href="structSysResource.html">SysResource</a> resourceList[] = {</div>
<div class="line">        {</div>
<div class="line">            .<a id="a1" name="a1"></a><a class="code hl_variable" href="structSysResource.html#a547486b7dc00085ba938e3234526706d">mResCode</a> = UCLAMP_MIN_RES,</div>
<div class="line">            .mResInfo = 0,</div>
<div class="line">            .mOptionalInfo = 0,</div>
<div class="line">            .mNumValues = 1,</div>
<div class="line">            .mResValue = {</div>
<div class="line">                .value = UCLAMP_BOOST_VAL,</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Refer Example#2 for details on opcode construction</span></div>
<div class="line"> </div>
<div class="line">    int64_t handle = <a id="a2" name="a2"></a><a class="code hl_function" href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga1eac546e5691c0c3d5d7036a68ba6a2b">tuneResources</a>(duration, properties, 1, resourceList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check the Returned Handle</span></div>
<div class="line">    <span class="keywordflow">if</span>(handle == -1) {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Request Could not be Sent to the Resource Tuner Server&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Handle Returned is: &quot;</span>&lt;&lt;handle&lt;&lt;std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This handle Value can be used for Future Untune / Retune Requests.</span></div>
<div class="line">    <span class="comment">// Note the Memory allocations made for Resource List will be freed</span></div>
<div class="line">    <span class="comment">// automatically by the Client Library, and should not be done by the Client itself.</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// EXAMPLE #2</span></div>
<div class="line"><span class="comment">// In the following Example the Client Sends:</span></div>
<div class="line"><span class="comment">// - A Resource Provisioning (Tune) Request to tune a resource, for an infinite duration.</span></div>
<div class="line"><span class="comment">// - Later the Client Sends an Untune Request to withdraw the previously issued Tune</span></div>
<div class="line"><span class="comment">//   Request, i.e. the Resource will be restored to its original Value.</span></div>
<div class="line"><span class="keywordtype">void</span> func2() {</div>
<div class="line">    <span class="comment">// Like func1, we first setup the API params</span></div>
<div class="line">    <span class="comment">// To Provision the Resources for an infinite duration, specify the duration</span></div>
<div class="line">    <span class="comment">// param in the tuneResources API as -1.</span></div>
<div class="line">    int64_t duration = -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Setup Request Properties</span></div>
<div class="line">    int32_t properties = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the Priority as High</span></div>
<div class="line">    properties = SET_REQUEST_PRIORITY(properties, REQ_PRIORITY_HIGH);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// To mark the Request as eligible for Background Processing</span></div>
<div class="line">    <span class="comment">// Note, specifying MODE_RESUME is optional, since it is enabled by default.</span></div>
<div class="line">    properties = ADD_ALLOWED_MODE(properties, MODE_RESUME);</div>
<div class="line">    properties = ADD_ALLOWED_MODE(properties, MODE_SUSPEND);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create the List of Resources which need to be Provisioned</span></div>
<div class="line">    <span class="comment">// Resource Struct Creation</span></div>
<div class="line">    <a class="code hl_struct" href="structSysResource.html">SysResource</a>* resourceList = <span class="keyword">new</span> <a class="code hl_struct" href="structSysResource.html">SysResource</a>[1];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize Resource struct Fields:</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResCode:</span></div>
<div class="line">    <span class="comment">// If the opcode is known directly,</span></div>
<div class="line">    <span class="comment">// resourceList[0].mResCode = 0x00030000;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Else if the resType and resId are known then use the CONSTRUCT_RES_CODE macro as follows:</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#a547486b7dc00085ba938e3234526706d">mResCode</a> = CONSTRUCT_RES_CODE(0x03, 0x0000);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Additional points to Note:</span></div>
<div class="line"><span class="comment">     * If the resource is user-defined / custom, then annotate the opcode as such:</span></div>
<div class="line"><span class="comment">     *     resourceList[0].mResCode = CUSTOM(resourceList[0].mResCode);</span></div>
<div class="line"><span class="comment">     * Or in one go:</span></div>
<div class="line"><span class="comment">     *     resourceList[0].mResCode = CUSTOM(CONSTRUCT_RES_CODE(0x03, 0x0000));</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResInfo</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a id="a3" name="a3"></a><a class="code hl_variable" href="structSysResource.html#aa7ed699e963bd7e4ae9072a60f52127a">mResInfo</a> = 0;</div>
<div class="line">    <span class="comment">// Note, above line of Code is not necessary, since the field is already initialized</span></div>
<div class="line">    <span class="comment">// to 0 via the Constructor.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mOptionalInfo</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a id="a4" name="a4"></a><a class="code hl_variable" href="structSysResource.html#ae083947a20223d9cd10723cbde963a3f">mOptionalInfo</a> = 0;</div>
<div class="line">    <span class="comment">// Note, above line of Code is not necessary, since the field is already initialized</span></div>
<div class="line">    <span class="comment">// to 0 via the Constructor.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mNumValues</span></div>
<div class="line">    <span class="comment">// Number of Values to be Configured for this Resource</span></div>
<div class="line">    <span class="comment">// Resource Tuner supports both Single and Multi Valued Resources</span></div>
<div class="line">    <span class="comment">// Here we consider the example for a single Valued Resource:</span></div>
<div class="line">    resourceList[0].<a id="a5" name="a5"></a><a class="code hl_variable" href="structSysResource.html#a8e1edb5ff3e4c91904666d79d5bc06c7">mNumValues</a> = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResValue</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a id="a6" name="a6"></a><a class="code hl_variable" href="structSysResource.html#aca188a66ddf08b265bcf2026fa7632ee">mResValue</a>.<a id="a7" name="a7"></a><a class="code hl_variable" href="structSysResource.html#a41dca28f9f5b0fdf0a4ba53945ad8de5">value</a> = 884;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Now our Resource struct is fully constructed</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Finally we can issue the Resource Provisioning (or Tune) Request</span></div>
<div class="line">    int64_t handle = <a class="code hl_function" href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga1eac546e5691c0c3d5d7036a68ba6a2b">tuneResources</a>(duration, properties, 1, resourceList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check the Returned Handle</span></div>
<div class="line">    <span class="keywordflow">if</span>(handle == -1) {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Tune Request could not be sent to the Resource Tuner Server&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Handle Returned is: &quot;</span>&lt;&lt;handle&lt;&lt;std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// After some time, say the Client wishes to withdraw the previously issued</span></div>
<div class="line">    <span class="comment">// Resource Provisioning Request, i.e. restore the Resources to their original Value.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Issue an Untune Request</span></div>
<div class="line">    int8_t status = <a id="a8" name="a8"></a><a class="code hl_function" href="group__RESOURCE__TUNER__CLIENT__APIS.html#gac2fd2c0cfa92a0573ff1e3d190072ad2">untuneResources</a>(handle);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(status == -1) {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Untune Request could not be sent to the Resource Tuner Server&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// EXAMPLE #3</span></div>
<div class="line"><span class="comment">// In the following Example the Client Sends:</span></div>
<div class="line"><span class="comment">// - A Resource Provisioning (Tune) Request to tune a resource, for some duration.</span></div>
<div class="line"><span class="comment">// - Later the Client wishes to Modify the duration of this Request, to do so</span></div>
<div class="line"><span class="comment">//   a Retune Request is issued to the Resource Tuner Server.</span></div>
<div class="line"><span class="keywordtype">void</span> func3() {</div>
<div class="line">    <span class="comment">// Provision for 8 seconds (8000 milliseconds)</span></div>
<div class="line">    int64_t duration = 8000;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Setup Request Properties</span></div>
<div class="line">    int32_t properties = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Here the Priority is High</span></div>
<div class="line">    properties = SET_REQUEST_PRIORITY(properties, REQ_PRIORITY_HIGH);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This Request should only be processed when the Device Display is On,</span></div>
<div class="line">    <span class="comment">// i.e. not a background Request.</span></div>
<div class="line">    <span class="comment">// Optional (since MODE_RESUME is enabled by default)</span></div>
<div class="line">    properties = ADD_ALLOWED_MODE(properties, MODE_RESUME);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create the List of Resources which need to be Provisioned</span></div>
<div class="line">    <span class="comment">// Resource Struct Creation</span></div>
<div class="line">    <a class="code hl_struct" href="structSysResource.html">SysResource</a>* resourceList = <span class="keyword">new</span> <a class="code hl_struct" href="structSysResource.html">SysResource</a>[1];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize Resource struct Fields:</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResCode:</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#a547486b7dc00085ba938e3234526706d">mResCode</a> = 0x00030000;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResInfo</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#aa7ed699e963bd7e4ae9072a60f52127a">mResInfo</a> = 0;</div>
<div class="line">    <span class="comment">// Note, above line of Code is not necessary, since the field is already initialized</span></div>
<div class="line">    <span class="comment">// to 0 via the Constructor.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mOptionalInfo</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#ae083947a20223d9cd10723cbde963a3f">mOptionalInfo</a> = 0;</div>
<div class="line">    <span class="comment">// Note, above line of Code is not necessary, since the field is already initialized</span></div>
<div class="line">    <span class="comment">// to 0 via the Constructor.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mNumValues</span></div>
<div class="line">    <span class="comment">// Number of Values to be Configured for this Resource</span></div>
<div class="line">    <span class="comment">// Resource Tuner supports both Single and Multi Valued Resources</span></div>
<div class="line">    <span class="comment">// Here we consider the example for a single Valued Resource:</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#a8e1edb5ff3e4c91904666d79d5bc06c7">mNumValues</a> = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Field: mResValue</span></div>
<div class="line">    <span class="comment">// Refer func1 for details</span></div>
<div class="line">    resourceList[0].<a class="code hl_variable" href="structSysResource.html#aca188a66ddf08b265bcf2026fa7632ee">mResValue</a>.<a class="code hl_variable" href="structSysResource.html#a41dca28f9f5b0fdf0a4ba53945ad8de5">value</a> = 884;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Now our Resource struct is fully constructed</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Finally we can issue the Resource Provisioning (or Tune) Request</span></div>
<div class="line">    int64_t handle = <a class="code hl_function" href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga1eac546e5691c0c3d5d7036a68ba6a2b">tuneResources</a>(duration, properties, 1, resourceList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check the Returned Handle</span></div>
<div class="line">    <span class="keywordflow">if</span>(handle == -1) {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Tune Request could not be sent to the Resource Tuner Server&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Handle Returned is: &quot;</span>&lt;&lt;handle&lt;&lt;std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// After some time, say the Client wishes to extend the duration of the previously</span></div>
<div class="line">    <span class="comment">// issued Resource Provisioning Request, they can do so by using the retuneResources API.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Issue a Retune Request</span></div>
<div class="line">    int64_t newDuration = 20000;</div>
<div class="line">    int8_t status = <a id="a9" name="a9"></a><a class="code hl_function" href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga3e60de0521a903c940e47f2c0a1ced5a">retuneResources</a>(handle, newDuration);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(status == -1) {</div>
<div class="line">        std::cout&lt;&lt;<span class="stringliteral">&quot;Untune Request could not be sent to the Resource Tuner Server&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">int32_t main(int32_t argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">    func1();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Compilation Notes:</span></div>
<div class="line"><span class="comment">// The executable needs to be linked to the RestuneClient lib, where these APIs</span></div>
<div class="line"><span class="comment">// are defined. This can be done, as follows:</span></div>
<div class="line"><span class="comment">// GCC: g++ CoreAPIsExamples.cpp -o ResourceTunerCoreAPIs -lClientAPIs</span></div>
<div class="line"><span class="comment">// CMake: This can be done as part of the C/C++ project by linking to the Library</span></div>
<div class="line"><span class="comment">// via the target_link_libraries command. For example, if the executalbe is called clientExec,</span></div>
<div class="line"><span class="comment">// it can be linked as follows:</span></div>
<div class="line"><span class="comment">// target_link_libraries(clientExec RestuneClient)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// More Examples?</span></div>
<div class="line"><span class="comment">// Refer: IntegrationTests.cpp in the $(root)/Tests/Integration/ directory, which exhaustively</span></div>
<div class="line"><span class="comment">// demonstrates the use of all these APIs. This file contains test code which mirrors the client perspective.</span></div>
<div class="ttc" id="agroup__RESOURCE__TUNER__CLIENT__APIS_html_ga1eac546e5691c0c3d5d7036a68ba6a2b"><div class="ttname"><a href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga1eac546e5691c0c3d5d7036a68ba6a2b">tuneResources</a></div><div class="ttdeci">int64_t tuneResources(int64_t duration, int32_t prop, int32_t numRes, SysResource *resourceList)</div><div class="ttdoc">Tune Resource Values for finite or finite duration.</div></div>
<div class="ttc" id="agroup__RESOURCE__TUNER__CLIENT__APIS_html_ga3e60de0521a903c940e47f2c0a1ced5a"><div class="ttname"><a href="group__RESOURCE__TUNER__CLIENT__APIS.html#ga3e60de0521a903c940e47f2c0a1ced5a">retuneResources</a></div><div class="ttdeci">int8_t retuneResources(int64_t handle, int64_t duration)</div><div class="ttdoc">Modify the duration of a previously issued Tune Request.</div></div>
<div class="ttc" id="agroup__RESOURCE__TUNER__CLIENT__APIS_html_gac2fd2c0cfa92a0573ff1e3d190072ad2"><div class="ttname"><a href="group__RESOURCE__TUNER__CLIENT__APIS.html#gac2fd2c0cfa92a0573ff1e3d190072ad2">untuneResources</a></div><div class="ttdeci">int8_t untuneResources(int64_t handle)</div><div class="ttdoc">Release (or free) the Request with the given handle.</div></div>
<div class="ttc" id="astructSysResource_html"><div class="ttname"><a href="structSysResource.html">SysResource</a></div><div class="ttdoc">Used to store information regarding Resources / Tunables which need to be Provisioned as part of the ...</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00027">UrmPlatformAL.h:27</a></div></div>
<div class="ttc" id="astructSysResource_html_a41dca28f9f5b0fdf0a4ba53945ad8de5"><div class="ttname"><a href="structSysResource.html#a41dca28f9f5b0fdf0a4ba53945ad8de5">SysResource::value</a></div><div class="ttdeci">int32_t value</div><div class="ttdoc">Use this field for single Valued Resources.</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00049">UrmPlatformAL.h:49</a></div></div>
<div class="ttc" id="astructSysResource_html_a547486b7dc00085ba938e3234526706d"><div class="ttname"><a href="structSysResource.html#a547486b7dc00085ba938e3234526706d">SysResource::mResCode</a></div><div class="ttdeci">uint32_t mResCode</div><div class="ttdoc">A uniqued 32-bit (unsigned) identifier for the Resource.</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00034">UrmPlatformAL.h:34</a></div></div>
<div class="ttc" id="astructSysResource_html_a8e1edb5ff3e4c91904666d79d5bc06c7"><div class="ttname"><a href="structSysResource.html#a8e1edb5ff3e4c91904666d79d5bc06c7">SysResource::mNumValues</a></div><div class="ttdeci">int32_t mNumValues</div><div class="ttdoc">Number of values to be configured for the Resource, both single-valued and multi-valued Resources are...</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00046">UrmPlatformAL.h:46</a></div></div>
<div class="ttc" id="astructSysResource_html_aa7ed699e963bd7e4ae9072a60f52127a"><div class="ttname"><a href="structSysResource.html#aa7ed699e963bd7e4ae9072a60f52127a">SysResource::mResInfo</a></div><div class="ttdeci">int32_t mResInfo</div><div class="ttdoc">Holds Logical Core and Cluster Information:</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00040">UrmPlatformAL.h:40</a></div></div>
<div class="ttc" id="astructSysResource_html_aca188a66ddf08b265bcf2026fa7632ee"><div class="ttname"><a href="structSysResource.html#aca188a66ddf08b265bcf2026fa7632ee">SysResource::mResValue</a></div><div class="ttdeci">union SysResource::@4 mResValue</div><div class="ttdoc">The value to be Configured for this Resource Node.</div></div>
<div class="ttc" id="astructSysResource_html_ae083947a20223d9cd10723cbde963a3f"><div class="ttname"><a href="structSysResource.html#ae083947a20223d9cd10723cbde963a3f">SysResource::mOptionalInfo</a></div><div class="ttdeci">int32_t mOptionalInfo</div><div class="ttdoc">Field to hold optional information for Request Processing.</div><div class="ttdef"><b>Definition</b> <a href="UrmPlatformAL_8h_source.html#l00041">UrmPlatformAL.h:41</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 29 2026 05:48:40 for Userspace Resource Manager by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
